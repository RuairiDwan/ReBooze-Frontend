(this["webpackJsonprebooze-frontend"]=this["webpackJsonprebooze-frontend"]||[]).push([[0],{34:function(e,t,n){e.exports=n(60)},39:function(e,t,n){},52:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},53:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(22),c=n.n(a),l=(n(39),n(6)),i=n(7),s=n(8),u=n(9),m=n(14),p=n(10);var g=n(5),b="https://rebooze.herokuapp.com",f={mode:"cors",headers:{"Content-Type":"application/json"}};function d(){return function(e){return fetch("".concat(b,"/beers"),f).then((function(e){return e.json()})).then((function(t){console.log("Beers Request",t),e({type:"RETRIEVE_BEERS",beers:t})}))}}function h(e){return{type:"BEER_PAGE_SELECTION",beerSelected:e}}var v=Object(m.c)({beers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("Action Type",t.type),t.type){case"RETRIEVE_BEERS":return console.log("Receiving beers"),Object(p.a)({},e,{},t.beers);case"RETRIEVE_DATA":return console.log(e.beers),Object(p.a)({},e,{},t.beers);case"BEER_SEARCH":return console.log("Changing Search Term"),console.log(t.searchTerm),Object(p.a)({},e,{searchTerm:t.searchTerm});case"BEER_PAGE_SELECTION":return console.log("Updating Beer Page Selected"),console.log(t.beerSelected),Object(p.a)({},e,{beerSelected:t.beerSelected});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("Action Type",t.type),t.type){case"RETRIEVE_USER_DATA":return console.log("Receiving User Data"),console.log(t.user),Object(p.a)({},e,{user:t.user});default:return e}},ratings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("Action Type",t.type),t.type){case"SUBMIT_RATING":return console.log("Submitting Rating"),e.concat([t.rating]);case"RETRIEVE_RATINGS":return console.log("Retrieving Ratings"),console.log(t.ratings),Object(p.a)({},e,{},t.ratings);case"RETRIEVE_VOTES":return console.log("Retrieving Votes"),Object.values(e).map((function(e){return Object(p.a)({},e,{},t.votes.find((function(t){return t.rating_id===e.id})))}));case"UP_VOTE":return console.log("Voting"),e.map((function(e){return e.id!==t.vote.rating_id?e:Object.assign({},e,{vote:!0})}));default:return e}}}),E=function(e){return function(t){return function(n){console.group(n.type),console.log("The action: ",n);var r=t(n);return console.log("The new state: ",e.getState()),console.groupEnd(),r}}},y=n(32),O=Object(m.a)(E,y.a),S=n(4);function j(e){return function(t){return function(e){return fetch("".concat(b,"/handlelogin"),{method:"POST",headers:Object(p.a)({},f.headers),body:JSON.stringify(e)})}(e).then((function(e){t({type:"RETRIEVE_USER_DATA",user:e})}))}}var R=Object(S.b)((function(e){return{user:e.user}}),(function(e){return{retrieveUserData:function(t){e(j(t))}}}))((function(e){var t=Object(g.b)().loginWithRedirect;return o.a.createElement("button",{onClick:function(){return t()}},"Log In")})),T=function(){var e=Object(g.b)().logout;return o.a.createElement("button",{onClick:function(){return e({returnTo:window.location.origin})}},"Log Out")},k=n(2),_=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.props.name,this.props.rating,this.props.brewery,o.a.createElement(k.b,{to:"beer-page"},o.a.createElement("button",{type:"button",onClick:function(){return e.props.beerPageSelection(e.props.id)}})))}}]),n}(r.Component),w=Object(S.b)((function(){return{}}),(function(e){return{beerPageSelection:function(t){e(h(t))}}}))(_);function I(e){return function(t){return function(e){return fetch("".concat(b,"/beerratings"),{method:"POST",headers:Object(p.a)({},f.headers),body:JSON.stringify(e)})}(e).then((function(e){console.log("Submitting Rating",e),t({type:"SUBMIT_RATING",rating:e})}))}}var N=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitRatingAsync,n=(e.beer,parseInt(localStorage.getItem("beer_selected"),10));return console.log("Create Rating Props"),console.log(this.props),o.a.createElement("div",null,o.a.createElement("div",null,"Submit a Rating for ",this.props.beerName),o.a.createElement("div",null,o.a.createElement("input",{id:"comment",type:"text",placeholder:"Comment"}),o.a.createElement("input",{id:"rating",type:"number",placeholder:"Number"})),o.a.createElement("div",null,o.a.createElement("button",{type:"button",onClick:function(){return function(){var e=document.getElementById("comment"),r=document.getElementById("rating"),o=e.value,a=r.value;e.value="",r.value="",t({beer_id:n,user_id:1,beer_rating:a,comment:o})}()}},"Submit Rating")))}}]),n}(r.Component),C=Object(S.b)((function(e){return{beers:e.beers.beers}}),(function(e){return{submitRatingAsync:function(t){e(I(t))}}}))(N),A=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.beerSearch("")}},{key:"render",value:function(){var e=this,t=this.props,n=t.beers,r=t.searchTerm;console.log("Beer list"),console.log(n),console.log(r);var a=""===r&this.props.beers||"undefined"==typeof r?n:n&&n.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())}));return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("input",{type:"text",value:this.props.searchTerm,placeholder:"Search Beers",onChange:function(t){return e.props.beerSearch(t.target.value)}})),o.a.createElement("div",null,o.a.createElement("ul",null,n&&a.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(w,{name:e.name,rating:e.avg_ating,brewery:e.brewery,id:e.id}))})))))}}]),n}(r.Component),B=Object(S.b)((function(e){var t=e.beers;return{beers:t.beers,searchTerm:t.searchTerm}}),(function(e){return{beerSearch:function(t){e({type:"BEER_SEARCH",searchTerm:t})}}}))(A),V=(n(52),n(53),n(18)),P=n.n(V),U=n(24),D=Object(S.b)(null,(function(e){return{retrieveUserData:function(t){e(j(t))}}}))((function(e){var t=Object(g.b)(),n=t.user,r=t.isAuthenticated,a=t.getAccessTokenSilently;return console.log(n),console.log("Profile"),console.log(e),r&&e.retrieveUserData({name:"Rory"}),r&&o.a.createElement("div",null,o.a.createElement("h2",null,"Profile"),o.a.createElement("h2",null,n.name),o.a.createElement("h2",null,a),o.a.createElement("button",{onClick:Object(U.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({audience:"https://rebooze-login",scope:"get:my-ratings"});case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))},"Log In"))}));r.Component,r.Component;var x=n(21);n(55);function W(){return o.a.createElement(k.b,{to:"sign-up"},o.a.createElement("button",{className:"btn"},"Sign Up"))}n(56);var J=[{title:"Top IPAs",path:"/ipa",cName:"dropdown-link"},{title:"Top Red/Brown Ales",path:"/redbrown",cName:"dropdown-link"},{title:"Top Stout",path:"/stout",cName:"dropdown-link"},{title:"Overall Top Brews",path:"/overall",cName:"dropdown-link"}];n(57);var L=function(){var e=Object(r.useState)(!1),t=Object(x.a)(e,2),n=t[0],a=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{onClick:function(){return a(!n)},className:n?"dropdown-menu clicked":"dropdown-menu"},J.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement(k.b,{className:e.cName,to:e.path,onClick:function(){return a(!1)}},e.title))}))))};function M(){return o.a.createElement(k.b,{to:"profile"},o.a.createElement("button",null,"Profile"))}var z=function(){var e=Object(r.useState)(!1),t=Object(x.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),l=Object(x.a)(c,2),i=l[0],s=l[1],u=function(){return a(!1)},m=Object(g.b)().isAuthenticated;return o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",{className:"navbar"},o.a.createElement(k.b,{to:"/",className:"navbar-logo",onClick:u},"Rebooze-",o.a.createElement("i",{className:"fas fa-beer"})),o.a.createElement("div",{className:"menu-icon",onClick:function(){return a(!n)}},o.a.createElement("i",{className:n?"fas fa-times":"fas fa-bars"})),o.a.createElement("ul",{className:n?"nav-menu active":"nav-menu"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(k.b,{to:"/",className:"nav-links",onClick:u},"Home")),o.a.createElement("li",{className:"nav-item",onMouseEnter:function(){window.innerWidth<960?s(!1):s(!0)},onMouseLeave:function(){window.innerWidth,s(!1)}},o.a.createElement(k.b,{to:"/services",className:"nav-links",onClick:u},"Top Brews ",o.a.createElement("i",{class:"fas fa-trophy"})),i&&o.a.createElement(L,null)),o.a.createElement("li",{className:"nav-item"},o.a.createElement(k.b,{to:"/rate",className:"nav-links",onClick:u},"Rate a Beer")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(k.b,{to:"/contact-us",className:"nav-links",onClick:u},"Contact Us")),o.a.createElement("li",null,o.a.createElement(k.b,{to:"/sign-up",className:"nav-links-mobile",onClick:u},"Sign Up"))),!m&&o.a.createElement(W,null),!m&&o.a.createElement(R,null),m&&o.a.createElement(M,null),m&&o.a.createElement(T,null)))},G=n(1);function F(e){return console.log("here"),function(e){return fetch("".concat(b,"/beerratings/1"),f).then((function(e){return e.json()})).then((function(t){console.log("Retrieving Ratings",t),e(function(e){return{type:"RETRIEVE_RATINGS",ratings:e}}(t))}))}}function H(e){return console.log("Retrieving Votes Async"),function(e){return fetch("".concat(b,"/votes/3"),f).then((function(e){return e.json()})).then((function(t){console.log("Retrieving Votes",t),e({type:"RETRIEVE_VOTES",votes:t})}))}}n(58);function q(e){return function(t){return function(e){return fetch("".concat(b,"/votes"),{method:"POST",headers:Object(p.a)({},f.headers),body:JSON.stringify(e)})}(e).then((function(n){console.log("Submitting Vote",n),t(function(e){return{type:"UP_VOTE",vote:e}}(e))}))}}var Q=Object(S.b)((function(){return{}}),(function(e){return{up_vote:function(t){e(q(t))}}}))((function(e){return o.a.createElement("button",{className:!0===e.vote?"btn_up_vote":"btn",onClick:function(){return!e.vote&&e.up_vote({rating_id:e.rating_id,voter_id:1})}},"Vote")})),X=(n(59),function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.retrieveRatings(),this.props.retrieveVotes();var e=localStorage.getItem("beer_selected"),t=this.props.beerSelected;console.log(t),"string"===typeof localStorage.getItem("beer_selected")&&console.log("We here 0"),console.log("Items being compared"),console.log(typeof t),console.log(e),"undefined"!==typeof t&&console.log(t.toString()),"undefined"!==typeof t&&t.toString()!==e&&localStorage.setItem("beer_selected",t.toString()),console.log(typeof localStorage.getItem("beer_selected"))}},{key:"render",value:function(){console.log(this.props.ratings),console.log("Beers"),console.log(this.props.beers),console.log("Beer Selected:"),console.log(this.props.beerSelected),console.log(localStorage.getItem("beer_selected"));var e=parseInt(localStorage.getItem("beer_selected"),10);console.log(typeof e),console.log(e);var t=this.props.beers&&this.props.beers.filter((function(t){return t.id===e}));console.log("Filtered beer"),console.log(t);var n=this.props.beers&&this.props.ratings&&Object.values(this.props.ratings).filter((function(t){return t.beer_id===e}));return console.log("Filtered Ratings"),console.log(n),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("img",{src:t&&e&&t[0].image,className:"photo"})),o.a.createElement("div",null,o.a.createElement("h1",null,"Beer Page")),o.a.createElement("div",null,o.a.createElement("h1",null,t&&e&&t[0].name)),o.a.createElement("div",null,o.a.createElement("h1",null,"Your Rating")),o.a.createElement("div",null,o.a.createElement("h1",null,"Top Ratings"),o.a.createElement("ul",null,n&&n.map((function(e){return o.a.createElement("li",{key:e.id},e.comment,o.a.createElement(Q,{vote:!!e.vote&&e.vote,rating_id:e.id}))})))),o.a.createElement("div",null,o.a.createElement(C,null)))}}]),n}(r.Component)),Y=Object(S.b)((function(e){var t=e.beers,n=e.ratings;return{beers:t.beers,ratings:n,beerSelected:t.beerSelected}}),(function(e){return{retrieveRatings:function(t){e(F())},retrieveVotes:function(t){e(H())},beerPageSelection:function(t){e(h(t))}}}))(X),Z=function(){return o.a.createElement("div",null,o.a.createElement(B,null))},$=n(33),K=Object(S.b)((function(e){return{user:e.user}}),(function(e){return{retrieveUserData:function(t){e(j(t))}}}))((function(e){var t=Object(g.b)(),n=t.user,a=t.isAuthenticated,c=t.getAccessTokenSilently,l=Object(G.f)(),i=function(){var e=Object(U.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("In async function"),e.next=4,c({audience:"https://rebooze-login",scope:"get:my-ratings"});case 4:t=e.sent,s.set("JWT",t,{path:"/"}),console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(r.useCallback)((function(){return l.push("/")}),[l]);console.log("The user is"),console.log(a),a&&i();var s=new $.a;return console.log("The JWT is :"),console.log(s.get("JWT")),"string"!==typeof n&&a&&e.retrieveUserData({name:n.given_name,email:n.email}),a?o.a.createElement(G.a,{push:!0,to:"/"}):o.a.createElement("div",null,"Callback Function")})),ee=Object(m.d)(v,O),te=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){console.log("The App component is mounting");localStorage.getItem("isAuthenticated");ee.dispatch(d())}},{key:"render",value:function(){return o.a.createElement(S.a,{store:ee},o.a.createElement(k.a,null,o.a.createElement(z,null),o.a.createElement("div",{className:"App"},o.a.createElement(G.b,{path:"/",exact:!0,component:Z}),o.a.createElement(G.b,{path:"/rate",component:C}),o.a.createElement(G.b,{path:"/profile",component:D}),o.a.createElement(G.b,{path:"/beer-page",component:Y}),o.a.createElement(G.b,{path:"/callback",component:K}))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(g.a,{domain:"dev-jlpcmeif.eu.auth0.com",clientId:"0qJeQS5S2IjLSwMB0GhxUQSZ8hR0PWDX",redirectUri:"https://localhost:3000/callback",audience:"https://rebooze-login",scope:"get:my-ratings"},o.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.a0270427.chunk.js.map